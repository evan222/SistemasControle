#:kivy 1.0.9

Interface:
	#amplitude: amplitude
	BoxLayout:
		orientation: "horizontal"
	#BOTOES
		BoxLayout:
			size_hint: [.35,1]
			orientation: "vertical"
			
			#MALHA
			BoxLayout:
				size_hint: [1,.8]
				orientation: "vertical"
				BoxLayout:
					size_hint: [1,1]
					orientation: "horizontal"
					ToggleButton:
						id: ma
						group: 'malha'
						state: 'down'
						background_normal: 'ondaup.png'
						background_down: 'ondadown.png'
						text: "Malha Aberta"
						on_press: root.MA()
					ToggleButton:
						id: mf #botaoquadrada
						group: 'malha'
						background_normal: 'ondaup.png'
						background_down: 'ondadown.png'
						text: "Malha Fechada"
						on_press: root.MF()
			#PID
			BoxLayout:
				size_hint: [1,0.6]
				orientation: "horizontal"
				ToggleButton:
					id: p
					group: 'pid'
					state: 'down'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "P"
					on_press: root.do_p()
				ToggleButton:
					id: pd
					group: 'pid'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "PD"
					on_press: root.do_pd()
				ToggleButton:
					id: pi
					group: 'pid'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "PI"
					on_press: root.do_pi()
				ToggleButton:
					id: pid
					group: 'pid'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "PID"
					on_press: root.do_pid()
				ToggleButton:
					id: pi_d 
					group: 'pid'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "PI-D"
					on_press: root.do_pi_d()
			
			#ONDA
			BoxLayout:
				size_hint: [1,1.2]
				orientation: "vertical"
				ToggleButton:
					id: bd
					group: 'onda'
					state: 'down'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "Onda Degrau"
					on_press: root.degrau()
				ToggleButton:
					id: bq #botaoquadrada
					group: 'onda'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "Onda Quadrada"
					on_press: root.quadrada()
				ToggleButton:
					id: bs
					group: 'onda'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "Onda Senoidal"
					on_press: root.senoide()		
				ToggleButton:
					id: bds
					group: 'onda'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "Onda Dente Serra"
					on_press: root.denteserra()
				ToggleButton:
					id: ba 
					group: 'onda'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					text: "Onda Aleatória"
					on_press: root.aleatoria()
			
			#INPUTS
			BoxLayout:
				size_hint: [1,1.5]
				orientation: "horizontal"
				GridLayout:
					rows: 5
					cols: 1
					Label:
						id: tensaominL
						text: "Tensao Minima"
					Label:
						id: tensaomaxL
						text: "Tensao Maxima"
					Label:
						id: tensaoentradaL
						text: "Tensao/cm de entrada (MF)"
					Label:
						id: offsetL
						text: "Offset"
					Label:
						id: periodo_labelL
						text: "Periodo"
				GridLayout:
					rows: 5
					cols: 3
					TextInput: 
						id: tensaomin
						multiline: False
						#input_filter: 'float'
						text: '-4'
						#off_text: root.tensao_min(tensaomin.text)
					Label:
						id: kpL
						text: "KP"
					TextInput: 
						id: kp
						multiline: False
						#readonly: True
						text: '0'
						#input_filter: 'float'
						#off_text: root.kp_in(kp.text)
						
					TextInput: 
						id: tensaomax
						multiline: False
						#input_filter: 'float'
						text: '4'
						#off_text: root.tensao_max(tensaomax.text)
					ToggleButton:
						id: ki_label
						group: 'integrativo'
						state: 'down'
						text: "KI"
						background_normal: 'ondaup.png'
						background_down: 'ondadown.png'
						on_press: root.pressKI()
					TextInput: 
						id: ki
						multiline: False
						#readonly: True
						disabled: True
						text: '0'
						#input_filter: 'float'
						#off_text: root.ki_in(ki.text)
						
					TextInput: 
						id: tensaoentrada
						multiline: False
						#input_filter: 'float'
						text: '0'
						#off_text: root.tensaoentrada(tensaoentrada.text)	
					ToggleButton:
						id: kd_label
						group: 'derivativo'
						state: 'down'
						text: "KD"
						background_normal: 'ondaup.png'
						background_down: 'ondadown.png'
						on_press: root.pressKD()
					TextInput: 
						id: kd
						multiline: False
						disabled: True
						#readonly: True
						#input_filter: 'float'
						text: '0'
						#off_text: root.kd_in(kd.text)
						
					TextInput: 
						id: offset
						multiline: False
						#input_filter: 'float'
						text: '0'
						#off_text: root.offset(offset.text)
					ToggleButton:
						id: taui_label
						group: 'integrativo'
						text: "Ti"
						background_normal: 'ondaup.png'
						background_down: 'ondadown.png'
						on_press: root.pressTI()
					TextInput: 
						id: taui
						multiline: False
						disabled: True
						#readonly: True
						#input_filter: 'float'
						text: '0'
						#off_text: root.taui_in(taui.text)
						
					TextInput: 
						id: periodo
						multiline: False
						#input_filter: 'float'
						disabled: True
						text: '10'
						#off_text: root.periodo(periodo.text)	
					
					ToggleButton:
						id: taud_label
						group: 'derivativo'
						text: "Td"
						background_normal: 'ondaup.png'
						background_down: 'ondadown.png'
						on_press: root.pressTD()
					TextInput: 
						id: taud
						#readonly: True
						multiline: False
						disabled: True
						text: '0'
						#input_filter: 'float'
						#off_text: root.taud_in(taud.text)					
					
					
					
			BoxLayout:
				size_hint: [1,0.8]
				orientation: "horizontal"
				Button:
					id: start
					background_normal: 'startup.png'
					background_down: 'startdown.png'
					border: 10,10,10,10
					text: "Start"
					on_press: root.startsaida()
				Button:
					id: stop
					background_normal: 'stopup.png'
					background_down: 'stopdown.png'
					border: 30,30,30,30
					text: "Stop"
					on_press: root.stop()	
				Button:
					id: atualiza
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					border: 30,30,30,30
					text: "Atualizar\nValores"
					on_press: root.atualiza()	
		
		#Graficos
		
		
		BoxLayout:
			canvas.before:
				Color:
					rgba: 1, 1, 1, 1
				Rectangle:
					pos: self.pos
					size: self.size
			size_hint: [.5,1]
			orientation: "vertical"
			BoxLayout:
				size_hint: [1,.1]
				orientation: "vertical"
				Label:
					id:malha
					bold: True
					color: 0,0,0,1.0
					text: 'Malha Aberta'
			Graph:
				id:graphsaida
				xlabel:"Tempo"
				ylabel:"Saida"
				xmin: 0
				xmax: 100
				ymin: -5
				ymax: 30
				y_ticks_minor: 2
				y_ticks_major: 5
				y_grid: True
				y_grid_label: True
				tick_color: 0,0,0,1.0
				border_color: 0,0,0,1.0
				mesh_rect_color: 0,0,0,1.0
				label_options:{'color': (0,0,0,1)}
				
			Graph:
				id:graphentrada
				xlabel:"Tempo"
				ylabel:"Entrada"
				xmin: 0
				xmax: 100
				ymin: -4
				ymax: 28
				y_ticks_minor: 2
				y_ticks_major: 5
				y_grid: True
				y_grid_label: True
				tick_color: 0,0,0,1.0
				border_color: 0,0,0,1.0
				mesh_rect_color: 0,0,0,1.0
				label_options:{'color': (0,0,0,1)}

			BoxLayout:
				canvas.before:
					Color:
						rgba: 0, 0, 0, 1
					Rectangle:
						pos: self.pos
						size: self.size
				size_hint: [1,.1]
				orientation: "horizontal"

				Label:
					id:legenda
					bold: True
					color: 1,1,1,1.0
					text: 'Legenda:'
				Label:
					canvas.before:
						Color:
							rgba: 0,0,1,1.0
						Rectangle:
							pos: self.pos
							size: self.size
					id:legenda
					bold: True
					color: 1,1,1,1.0
					text_size: self.size
					valign: 'middle'
					halign: 'center'
					text: 'Set Point'
				Label:
					canvas.before:
						Color:
							rgba: 1,0,0,1.0
						Rectangle:
							pos: self.pos
							size: self.size
					id:legenda
					bold: True
					color: 1,1,1,1.0
					text_size: self.size
					valign: 'middle'
					halign: 'center'
					text: 'Tensão'
				Label:
					canvas.before:
						Color:
							rgba: 0,128,0,1.0
						Rectangle:
							pos: self.pos
							size: self.size
					id:legenda
					bold: True
					color: 1,1,1,1.0
					text_size: self.size
					valign: 'middle'
					halign: 'center'
					text: 'Altura'
		
		
		#LEGENDAS E TANQUES
		
		BoxLayout:
			canvas.before:
				Color:
					rgba: 0, 0, 0, .5
				Rectangle:
					pos: self.pos
					size: self.size
			size_hint: [.3,1]
			orientation: "vertical"
			
			BoxLayout:
				size_hint: [1,.3]
				orientation: "horizontal"
				
				ToggleButton:
					id: tanque1
					group: 'tanques'
					text: "Tanque 1"
					state: 'down'
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					on_press: root.tanque1()
				ToggleButton:
					id: tanque2
					group: 'tanques'
					text: "Tanque 2"
					background_normal: 'ondaup.png'
					background_down: 'ondadown.png'
					on_press: root.tanque2()
			
			
			BoxLayout:
				orientation: "horizontal"
				#size_hint: [1,.8]
				
				BoxLayout:
					canvas.before:
						Color:
							rgba: 1, 1, 1, 1
						Rectangle:
							pos: self.pos
							size: self.size
							source: 'tanque.png'
					#size_hint: [1,.9]
					orientation: "vertical"
					
					
					BoxLayout:
						orientation: "horizontal"
						BoxLayout:
							size_hint: [.3,1]
						Bar:
							id: nivel_tanque1
							animated: True
							value: 0
							color: 0, 0, 128, .4
							background_color: .5, .5, .5, 1
							orientation: 'bt'

			
			GridLayout:
				size_hint: [1, .4]
				rows: 3
				cols: 2
				Label:
					text: "Overshoot: (%)"
				TextInput: 
					id: overshoot
					multiline: False
					disabled: False
					readonly: True
					#input_filter: 'float'
					text_size: self.size
					text: '-'
				Label:
					text: "Tempo Subida: (s)"
				TextInput: 
					id: tempo_subida
					multiline: False
					disabled: False
					readonly: True
					#input_filter: 'float'
					text_size: self.size
					text: '-'
				Label:
					#text_size: self.size
					text: "Tempo Acomodação: (s)"
				TextInput: 
					id: tempo_acomodacao
					multiline: False
					disabled: False
					readonly: True
					#input_filter: 'float'
					text_size: self.size
					text: '-'

			
